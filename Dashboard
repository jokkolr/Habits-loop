<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HabitLoop - Build & Break Habits</title>
  <style>
    :root {
      --bg: #f9fafc;
      --text: #222;
      --accent: #4CAF50;
      --nav-bg: #fff;
      --card-bg: #fff;
      --shadow: rgba(0,0,0,0.1);
    }
    body.dark {
      --bg: #121212;
      --text: #f9f9f9;
      --accent: #66BB6A;
      --nav-bg: #1e1e1e;
      --card-bg: #1e1e1e;
      --shadow: rgba(255,255,255,0.05);
    }
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family: 'Arial', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }
    nav {
      background: var(--nav-bg);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px var(--shadow);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }
    nav .links {display: flex; gap: 1rem;}
    nav a, nav button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      color: #fff;
      font-weight: bold;
      font-size: 0.95rem;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    nav a:hover, nav button:hover {
      background: linear-gradient(135deg, #45a049, #3e8e41);
      transform: scale(1.05);
    }
    #menuToggle {display:none;flex-direction:column;gap:4px;cursor:pointer;}
    #menuToggle div {width:24px;height:3px;background:var(--text);}
    .mobileMenu {
      display:none;flex-direction:column;position:absolute;top:60px;right:0;
      background:var(--nav-bg);width:220px;box-shadow:0 2px 5px var(--shadow);
      transform:translateX(100%);transition:transform 0.3s ease-in-out;
      padding:1rem;
    }
    .mobileMenu.open {display:flex;transform:translateX(0);}
    .mobileMenu a, .mobileMenu button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: #fff;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-radius: 25px;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    section {
      max-width: 900px;
      margin: 100px auto 20px;
      padding: 1rem;
      text-align: center;
    }
    h1, h2, h3 { color: var(--accent); margin-bottom: 1rem; }
    select, textarea, input, button {
      margin-top: 1rem;
      padding: 0.8rem;
      border-radius: 5px;
      border:1px solid #ccc;
      width: 90%;
      max-width: 400px;
      font-size: 1rem;
    }
    .card {
      background: var(--card-bg);
      margin: 1.5rem auto;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px var(--shadow);
      text-align: left;
    }
    ul {margin-top:1rem;padding-left:1rem;}
    ul li {margin-bottom: 0.8rem;list-style: none;position: relative;padding-left: 1.5rem;}
    ul li::before {content: "✔";color: var(--accent);position: absolute;left: 0;}
    .progress-bar {background:#ddd;border-radius:5px;overflow:hidden;height:20px;margin-top:10px;}
    .progress-fill {background:var(--accent);width:0;height:100%;transition:width 1s ease;}
    footer {text-align:center;font-size:0.8rem;color:#888;padding:1rem;}
    @media(max-width:768px){nav .links{display:none;}#menuToggle{display:flex;}}
    #authSection {display:none;}
  </style>
</head>
<body>
  <nav>
    <div style="font-weight:bold;">HabitLoop</div>
    <div class="links">
      <a href="#home">Home</a>
      <a href="#habits">Habits</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#journal">Journal</a>
      <button id="logoutBtn" style="display:none;">Logout</button>
      <button id="themeToggle">Theme</button>
    </div>
    <div id="menuToggle"><div></div><div></div><div></div></div>
    <div class="mobileMenu" id="mobileMenu">
      <a href="#home">Home</a>
      <a href="#habits">Habits</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#journal">Journal</a>
      <button id="themeToggleMobile">Theme</button>
      <button id="logoutBtnMobile" style="display:none;">Logout</button>
    </div>
  </nav>

  <!-- Authentication -->
  <section id="authSection">
    <h2 id="authTitle">Login</h2>
    <input type="text" id="username" placeholder="Username"><br>
    <input type="email" id="email" placeholder="Email"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button onclick="handleAuth()">Submit</button><br>
    <p id="authMsg"></p>
    <button onclick="toggleAuthMode()">Switch to Sign Up</button>
  </section>

  <!-- Main content (hidden until logged in) -->
  <div id="mainContent" style="display:none;">
    <section id="home">
      <h1>Welcome to HabitLoop</h1>
      <p>Use science-backed steps to build good habits and break bad ones.</p>
    </section>

    <section id="habits">
      <h2>Select a Habit</h2>
      <select id="habitSelect">
        <option value="">-- Choose a Habit --</option>
        <optgroup label="Good Habits">
          <option value="reading">Reading Daily</option>
          <option value="exercise">Exercising</option>
          <option value="waking">Waking Up Early</option>
        </optgroup>
        <optgroup label="Bad Habits">
          <option value="drugs">Drug Addiction</option>
          <option value="porn">Porn Addiction</option>
          <option value="risky">Risky Sexual Behavior</option>
        </optgroup>
      </select>
      <div class="card" id="habitGuide"></div>
    </section>

    <section id="dashboard">
      <h2>Your Progress Dashboard</h2>
      <div id="progressList"></div>
    </section>

    <section id="journal">
      <h2>Your Journal</h2>
      <textarea id="journalEntry" rows="6" placeholder="Write your thoughts..."></textarea><br>
      <button onclick="saveJournal()">Save</button>
      <p id="saveMsg" style="color:var(--accent);"></p>
    </section>
  </div>

  <footer>HabitLoop © 2025</footer>

  <script>
    let isLogin = true;
    const habits = {
      reading:{plan:["Make it Obvious","Make it Attractive","Make it Easy","Make it Satisfying"],streak:0},
      exercise:{plan:["Make it Obvious","Make it Attractive","Make it Easy","Make it Satisfying"],streak:0},
      waking:{plan:["Make it Obvious","Make it Attractive","Make it Easy","Make it Satisfying"],streak:0},
      drugs:{plan:["Make it Invisible","Make it Unattractive","Make it Difficult","Make it Unsatisfying"],streak:0},
      porn:{plan:["Make it Invisible","Use Blockers","Make it Difficult","Make it Unsatisfying"],streak:0},
      risky:{plan:["Make it Invisible","See STI Risks","Make it Difficult","Make it Unsatisfying"],streak:0}
    };

    function toggleAuthMode(){
      isLogin = !isLogin;
      document.getElementById('authTitle').textContent = isLogin ? "Login" : "Sign Up";
      document.querySelector('#authSection button:last-of-type').textContent = isLogin ? "Switch to Sign Up" : "Switch to Login";
    }

    function handleAuth(){
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const msg = document.getElementById('authMsg');
      if(!email || !password){msg.textContent="Please fill all fields.";return;}
      if(isLogin){
        const stored = JSON.parse(localStorage.getItem('user'));
        if(stored && stored.email===email && stored.password===password){
          loginSuccess();
        } else {
          msg.textContent="Invalid login details.";
        }
      } else {
        const username=document.getElementById('username').value;
        if(!username){msg.textContent="Enter username.";return;}
        localStorage.setItem('user',JSON.stringify({username,email,password}));
        msg.textContent="Account created! You can now login.";
        toggleAuthMode();
      }
    }

    function loginSuccess(){
      document.getElementById('authSection').style.display="none";
      document.getElementById('mainContent').style.display="block";
      document.getElementById('logoutBtn').style.display="inline-block";
      document.getElementById('logoutBtnMobile').style.display="inline-block";
    }

    document.getElementById('logoutBtn').addEventListener('click',logout);
    document.getElementById('logoutBtnMobile').addEventListener('click',logout);
    function logout(){
      document.getElementById('authSection').style.display="block";
      document.getElementById('mainContent').style.display="none";
      document.getElementById('logoutBtn').style.display="none";
      document.getElementById('logoutBtnMobile').style.display="none";
    }

    function saveJournal(){
      localStorage.setItem('habitJournal',document.getElementById('journalEntry').value);
      document.getElementById('saveMsg').textContent='Journal saved!';
      setTimeout(()=>{document.getElementById('saveMsg').textContent='';},2000);
    }

    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click',()=>document.body.classList.toggle('dark'));
    document.getElementById('themeToggleMobile').addEventListener('click',()=>document.body.classList.toggle('dark'));

    // Mobile menu
    document.getElementById('menuToggle').addEventListener('click',()=>document.getElementById('mobileMenu').classList.toggle('open'));

    // Show login first if not logged in
    document.getElementById('authSection').style.display="block";
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HabitLoop - Build & Break Habits</title>
  <style>
    :root {
      --bg: #f9fafc;
      --text: #222;
      --accent: #4CAF50;
      --nav-bg: #fff;
      --card-bg: #fff;
      --shadow: rgba(0,0,0,0.1);
    }
    body.dark {
      --bg: #121212;
      --text: #f9f9f9;
      --accent: #66BB6A;
      --nav-bg: #1e1e1e;
      --card-bg: #1e1e1e;
      --shadow: rgba(255,255,255,0.05);
    }
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family: 'Arial', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }
    nav {
      background: var(--nav-bg);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px var(--shadow);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }
    nav .links {display: flex; gap: 1rem;}

    /* Updated button styles */
    nav a, nav button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      color: #fff;
      font-weight: bold;
      font-size: 0.95rem;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    nav a:hover, nav button:hover {
      background: linear-gradient(135deg, #45a049, #3e8e41);
      transform: scale(1.05);
    }

    #menuToggle {display:none;flex-direction:column;gap:4px;cursor:pointer;}
    #menuToggle div {width:24px;height:3px;background:var(--text);}

    .mobileMenu {
      display:none;flex-direction:column;position:absolute;top:60px;right:0;
      background:var(--nav-bg);width:220px;box-shadow:0 2px 5px var(--shadow);
      transform:translateX(100%);transition:transform 0.3s ease-in-out;
      padding:1rem;
    }
    .mobileMenu.open {display:flex;transform:translateX(0);}
    .mobileMenu a, .mobileMenu button {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: #fff;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-radius: 25px;
      text-align: center;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    .mobileMenu a:hover, .mobileMenu button:hover {
      background: linear-gradient(135deg, #45a049, #3e8e41);
      transform: scale(1.05);
    }

    section {
      max-width: 900px;
      margin: 100px auto 20px;
      padding: 1rem;
      text-align: center;
    }
    h1, h2, h3 { color: var(--accent); margin-bottom: 1rem; }
    select, textarea, button {
      margin-top: 1rem;
      padding: 0.8rem;
      border-radius: 5px;
      border:1px solid #ccc;
      width: 90%;
      max-width: 400px;
      font-size: 1rem;
    }
    .card {
      background: var(--card-bg);
      margin: 1.5rem auto;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px var(--shadow);
      text-align: left;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
    ul {margin-top:1rem;padding-left:1rem;}
    ul li {
      margin-bottom: 0.8rem;
      list-style: none;
      position: relative;
      padding-left: 1.5rem;
    }
    ul li::before {
      content: "✔";
      color: var(--accent);
      position: absolute;
      left: 0;
      font-size: 1.1rem;
    }
    .step-number {
      display:inline-block;
      background: var(--accent);
      color: #fff;
      width: 22px;
      height: 22px;
      line-height: 22px;
      text-align: center;
      border-radius: 50%;
      margin-right: 8px;
      font-size: 0.8rem;
    }
    .progress-bar {
      background:#ddd;
      border-radius:5px;
      overflow:hidden;
      height:20px;
      margin-top:10px;
    }
    .progress-fill {
      background:var(--accent);
      width:0;
      height:100%;
      transition:width 1s ease;
    }
    .sti-warning {
      margin-top:1rem;
      text-align:center;
      font-size:0.9rem;
    }
    .sti-warning a {color:red;font-weight:bold;text-decoration:none;}
    footer {text-align:center;font-size:0.8rem;color:#888;padding:1rem;}
    @media(max-width:768px){
      nav .links{display:none;}
      #menuToggle{display:flex;}
    }
  </style>
</head>
<body>
  <nav>
    <div style="font-weight:bold;">HabitLoop</div>
    <div class="links">
      <a href="#home">Home</a>
      <a href="#habits">Habits</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#journal">Journal</a>
      <button id="themeToggle">Theme</button>
    </div>
    <div id="menuToggle"><div></div><div></div><div></div></div>
    <div class="mobileMenu" id="mobileMenu">
      <a href="#home">Home</a>
      <a href="#habits">Habits</a>
      <a href="#dashboard">Dashboard</a>
      <a href="#journal">Journal</a>
      <button id="themeToggleMobile">Theme</button>
    </div>
  </nav>

  <section id="home">
    <h1>Welcome to HabitLoop</h1>
    <p>Use science-backed steps to <strong>build good habits</strong> and <strong>break bad ones</strong>.</p>
  </section>

  <section id="habits">
    <h2>Select a Habit</h2>
    <select id="habitSelect">
      <option value="">-- Choose a Habit --</option>
      <optgroup label="Good Habits">
        <option value="reading">Reading Daily</option>
        <option value="exercise">Exercising</option>
        <option value="waking">Waking Up Early</option>
      </optgroup>
      <optgroup label="Bad Habits">
        <option value="drugs">Drug Addiction</option>
        <option value="porn">Porn Addiction</option>
        <option value="risky">Risky Sexual Behavior</option>
      </optgroup>
    </select>
    <div class="card" id="habitGuide"></div>
    <div class="sti-warning" id="stiWarning" style="display:none;">
      <p>Before risky behaviors, <strong>educate yourself</strong>. See STI awareness images:</p>
      <a href="https://clarewellclinics.co.uk/sti/symptoms/pictures/" target="_blank">STI Gallery</a>
    </div>
  </section>

  <section id="dashboard">
    <h2>Your Progress Dashboard</h2>
    <div id="progressList"></div>
  </section>

  <section id="journal">
    <h2>Your Journal</h2>
    <textarea id="journalEntry" rows="6" placeholder="Write your progress or thoughts..."></textarea><br>
    <button onclick="saveJournal()">Save</button>
    <p id="saveMsg" style="color:var(--accent);"></p>
  </section>

  <footer>HabitLoop © 2025</footer>

  <script>
    const habits = {
      reading: {
        intro:"If you want to build a habit of reading, here’s what you should do:",
        plan:[
          "Make it Obvious: Place your book somewhere visible (bed, desk).",
          "Make it Attractive: Choose books you actually enjoy.",
          "Make it Easy: Start with 5 minutes a day.",
          "Make it Satisfying: Track streaks and reward milestones."
        ],streak:0
      },
      exercise:{
        intro:"If you want to build a habit of exercising, here’s what you should do:",
        plan:[
          "Make it Obvious: Lay out workout clothes.",
          "Make it Attractive: Play music or find a workout buddy.",
          "Make it Easy: Begin with 10 minutes a day.",
          "Make it Satisfying: Celebrate weekly wins."
        ],streak:0
      },
      waking:{
        intro:"If you want to wake up early, here’s what you should do:",
        plan:[
          "Make it Obvious: Put alarm across the room.",
          "Make it Attractive: Plan something fun for mornings.",
          "Make it Easy: Shift bedtime/wake time by 15 minutes daily.",
          "Make it Satisfying: Track and reward progress."
        ],streak:0
      },
      drugs:{
        intro:"If you want to break drug addiction, here’s how to weaken it:",
        plan:[
          "Make it Invisible: Avoid triggers and risky areas.",
          "Make it Unattractive: Think about long-term harm.",
          "Make it Difficult: Cut access and seek support.",
          "Make it Unsatisfying: Stay accountable to others."
        ],streak:0
      },
      porn:{
        intro:"If you want to stop porn addiction, here’s how to weaken it:",
        plan:[
          "Make it Invisible: Use website blockers.",
          "Make it Unattractive: Focus on harm to your mind and relationships.",
          "Make it Difficult: Restrict access and add accountability.",
          "Make it Unsatisfying: Track urges and consequences."
        ],streak:0
      },
      risky:{
        intro:"If you want to avoid risky sexual behaviors, here’s how:",
        plan:[
          "Make it Invisible: Avoid risky parties/places.",
          "Make it Unattractive: Learn about STI risks.",
          "Make it Difficult: Avoid drugs/alcohol before intimacy.",
          "Make it Unsatisfying: Use a support system."
        ],streak:0
      }
    };
    const habitSelect=document.getElementById('habitSelect');
    const guideDiv=document.getElementById('habitGuide');
    const stiWarning=document.getElementById('stiWarning');
    const progressList=document.getElementById('progressList');

    function loadDashboard(){
      progressList.innerHTML='';
      for(let h in habits){
        const streak=habits[h].streak;
        const div=document.createElement('div');
        div.className='card';
        div.innerHTML=`<h3>${h.charAt(0).toUpperCase()+h.slice(1)}</h3>
          <p>Days: <span class="counter" data-target="${streak}">0</span></p>
          <div class="progress-bar"><div class="progress-fill"></div></div>`;
        progressList.appendChild(div);
      }
      animateCounters();
    }
    function animateCounters(){
      document.querySelectorAll('.counter').forEach(counter=>{
        const target=+counter.dataset.target;
        let count=0;
        const update=()=>{
          count++;
          counter.textContent=count;
          if(count<target) requestAnimationFrame(update);
        };
        update();
      });
      document.querySelectorAll('.progress-fill').forEach((fill,i)=>{
        const target=Object.values(habits)[i].streak*10;
        setTimeout(()=>{fill.style.width=`${Math.min(target,100)}%`;},300);
      });
    }
    habitSelect.addEventListener('change',()=>{
      const val=habitSelect.value;
      if(!val){guideDiv.innerHTML='';stiWarning.style.display='none';return;}
      const h=habits[val];
      const steps=h.plan.map((p,i)=>`<li><span class="step-number">${i+1}</span>${p}</li>`).join('');
      guideDiv.innerHTML=`<h3>${habitSelect.options[habitSelect.selectedIndex].text}</h3>
        <p>${h.intro}</p><ul>${steps}</ul>`;
      stiWarning.style.display=(val==='risky')?'block':'none';
    });
    function saveJournal(){
      localStorage.setItem('habitJournal',document.getElementById('journalEntry').value);
      document.getElementById('saveMsg').textContent='Journal saved!';
      setTimeout(()=>{document.getElementById('saveMsg').textContent='';},2000);
    }
    document.getElementById('journalEntry').value=localStorage.getItem('habitJournal')||'';
    document.getElementById('themeToggle').addEventListener('click',()=>document.body.classList.toggle('dark'));
    document.getElementById('themeToggleMobile').addEventListener('click',()=>document.body.classList.toggle('dark'));
    const menuToggle=document.getElementById('menuToggle');
    const mobileMenu=document.getElementById('mobileMenu');
    menuToggle.addEventListener('click',()=>mobileMenu.classList.toggle('open'));
    document.querySelectorAll('.mobileMenu a,.mobileMenu button').forEach(link=>{
      link.addEventListener('click',()=>mobileMenu.classList.remove('open'));
    });
    loadDashboard();
  </script>
</body>
</html>
